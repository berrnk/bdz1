# **ФИНАНСЫ**

## **1. Введение и основные функции**

Этот проект представляет собой консольное приложение для учета финансов, включающее управление счетами, транзакциями и аналитикой. Основные возможности модуля:

### **1.1 Управление счетами (BankAccount)**  
- Добавление, изменение и удаление счетов  
- Автоматический пересчет баланса при внесении доходов или расходов  

### **1.2 Категории доходов и расходов (Category)**  
- Создание, редактирование и удаление категорий  

### **1.3 Операции (Operation)**  
- Внесение, изменение и удаление операций  
- Перерасчет баланса на соответствующем счете  

### **1.4 Анализ финансов**  
- Расчет прибыли и убытков за выбранный период  
- Группировка транзакций по категориям  

### **1.5 Импорт и экспорт данных**  
- Сохранение в CSV, JSON, YAML (паттерн «Посетитель»)  
- Загрузка из CSV, JSON, YAML (паттерн «Шаблонный метод»)  

### **1.6 Контроль времени выполнения операций**  
- Использование паттернов «Команда» и «Декоратор» для оценки производительности  

### **1.7 Консольный интерфейс**  
- Позволяет выполнять все операции через командную строку  

> **Дополнительные улучшения:**  
> - Внедрён механизм фабрики для создания объектов с автоматической валидацией  
> - Реализовано четкое разделение архитектуры на слои (Domain, Infrastructure, Application, Presentation)  
> - Поддерживается возврат в главное меню и отмена ввода  

---

## **2. Архитектурные принципы SOLID и GRASP**

### **2.1 SOLID**

1. **SRP (Принцип единственной ответственности)**  
   - `BankAccount` управляет балансом, но не отвечает за сохранение данных  
   - `FinancialFacade` обрабатывает бизнес-логику, не затрагивая технические детали  

2. **OCP (Принцип открытости/закрытости)**  
   - Для добавления нового формата импорта (например, XML) достаточно создать новый класс, не изменяя существующий код  

3. **LSP (Принцип подстановки Лисков)**  
   - `CsvDataImporter`, `JsonDataImporter` и `YamlDataImporter` являются корректными подтипами `DataImporter`  

4. **ISP (Принцип разделения интерфейсов)**  
   - `ICommand` содержит только `Execute()`, `IExportVisitor` включает методы `Visit(...)` для различных форматов  

5. **DIP (Принцип инверсии зависимостей)**  
   - Импорт и экспорт работают через абстрактные интерфейсы, а не напрямую с файлами  

### **2.2 GRASP**

1. **Высокая связность (High Cohesion)**  
   - Каждый компонент отвечает за конкретную задачу  

2. **Слабая связанность (Low Coupling)**  
   - Консольное приложение не зависит от деталей хранения данных  

3. **Создатель (Creator)**  
   - `DomainFactory` управляет созданием объектов (`BankAccount`, `Category`, `Operation`)  

4. **Контроллер (Controller)**  
   - `FinancialFacade` координирует операции, обеспечивая централизованное управление  

5. **Вспомогательный класс (Pure Fabrication)**  
   - `FinancialFacade` реализует бизнес-логику, не относящуюся к предметной области  

---

## **3. Используемые паттерны**

### **3.1 Фабрика (Factory Pattern)**  
- `DomainFactory` управляет созданием объектов и валидацией входных данных  

### **3.2 Фасад (Facade Pattern)**  
- `FinancialFacade` объединяет основные операции  

### **3.3 Команда (Command Pattern)**  
- Команды (`CreateAccountCommand`) представляют операции как объекты  

### **3.4 Декоратор (Decorator Pattern)**  
- `TimeMeasuredCommandDecorator` измеряет время выполнения команд  

### **3.5 Шаблонный метод (Template Method Pattern)**  
- `DataImporter` реализует общий алгоритм работы с файлами, а подклассы (`CsvDataImporter`, `JsonDataImporter`) определяют детали  

### **3.6 Посетитель (Visitor Pattern)**  
- `IExportVisitor` позволяет добавлять новые форматы экспорта без изменения доменных классов  

### **3.7 Прокси (Proxy Pattern)**  
- `DataContext` скрывает детали хранения, позволяя переключаться между in-memory и БД  

---

## **4. Инструкция по запуску**

### **4.1 Клонирование репозитория**  
```bash
git clone https://github.com/berrnk/FinancialAccounting.git
```
### **4.2 Переход в директорию проекта**  
```bash
cd FinancialAccounting
```
### **4.3 Проверка наличия .NET SDK**  
- Убедитесь, что установлен .NET SDK 6.0  

### **4.4 Сборка проекта**  
```bash
dotnet build
```
### **4.5 Запуск приложения**  
```bash
cd FinancialAccounting.ConsoleApp
dotnet run
```

После запуска появится консольный интерфейс для управления финансами, импортом/экспортом и аналитикой.
